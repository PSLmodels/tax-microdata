---
output: html_document
editor_options: 
 chunk_output_type: console
---

# Usage: How to create Congressional District target files and the associated local web page

To Come: Use of `renv` to define versions of packages.

## Prerequisites

-   Recent version of [R](https://www.r-project.org/). This project was created with R version 4.4.1.
-   Recent versions of R packages used by this project. See ".../targets/prepare/R/libraries.R"
-   Recent pre-release version of [quarto](https://quarto.org/docs/download/prerelease.html), 1.6 or higher. This project was created with quarto version 1.6.24
-   Be sure that ".../targets/prepare/cds/raw_data/" exists and has the files shown in the screenshot below. The GitHub repo includes these files:

<!-- 21incddocguide.docx -->
<!-- cd_documentation_extracted_from_21incddocguide.docx.xlsx -->
<!-- cdpop1year_acs.csv -->
<!-- cdpop5year_acs.csv -->
<!-- congressional2021.zip -->
<!-- geocorr2022_2428906586.csv -->

![](images/raw_data.jpeg)

## To create target files and build the web page

-   Open a terminal in the "prepare" folder.
-   Enter "quarto render"

The first time the project is rendered, it will create needed intermediates files and put them in the "../cds/intermediate" folder.

Note that the _quarto.yml file sets the `freeze` execution option to `auto`, which means .qmd files will not be rerendered if they have not changed. For a full re-rendering, set `freeze: false`, which will rerender everything regardless of whether code has changed (except that it will not re-render chunks with the option `eval: false`).

At present the code prepares target files with targets we believe are useful and practical. Users who want different targets will have to modify code to do so. However, as described in overall repo documentation, users can comment-out individual targets.

## After rendering is complete

-   target .csv files will be in the ".../targets/prepare/cds/final/" folder
-   local documentation web page will be in the ".../targets/prepare/_targetprep/" folder

## To create area weights using the target files in tax-microdata-benchmarking

-   copy desired target .csv files from ".../targets/prepare/cds/final/" folder to the ".../targets/" folder
-   follow tax-microdata-benchmarking instructions to run `make_all.py` or `create_area_weights.py'

## Additional notes

-   It is possible to render each qmd file separately, step by step, to be sure all is working as desired.
-   Each qmd file has its own setup section in which it loads packages and constants. This is unnecessary duplication when rendering the entire project, but it is useful during development because it allows rendering individual qmd files without rendering the entire project.
